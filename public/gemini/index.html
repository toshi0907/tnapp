<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Gemini AI</title>
  <link rel="stylesheet" href="/public/style.css">
  <script src="/public/gemini/app.js" defer></script>
</head>

<body>
  <h1>Gemini AI</h1>
  <div id="msg" class="msg"></div>

  <h2>🤖 実行結果</h2>
  <div class="todo-controls">
    <input type="text" id="search-input" placeholder="検索キーワード...">
    
    <label for="category-filter">Category:</label>
    <select id="category-filter">
      <option value="">All Categories</option>
    </select>
    
    <label for="status-filter">Status:</label>
    <select id="status-filter">
      <option value="">All Status</option>
      <option value="success">Success</option>
      <option value="error">Error</option>
    </select>
    
    <button id="refresh-btn">🔄 更新</button>
  </div>
  <div id="results-container" style="min-height: 200px; margin-bottom: 2rem;"></div>

  <h2 id="form-title">✍️ プロンプト実行</h2>
  <form id="gemini-form">
    <div class="form-group">
      <label for="prompt">プロンプト *</label>
      <textarea id="prompt" name="prompt" placeholder="Gemini AIに送信するプロンプトを入力してください..." required rows="4"></textarea>
    </div>
    
    <div class="form-group">
      <label for="model">モデル選択</label>
      <select id="model" name="model">
        <!-- Options will be populated by JavaScript -->
      </select>
      <div id="model-info" class="model-info" style="margin-top: 0.5rem; padding: 0.5rem; background: #f8f9fa; border-radius: 0.25rem; font-size: 0.9rem; color: #6c757d; display: none;">
        <!-- Model information will be displayed here -->
      </div>
    </div>
    
    <div class="form-row">
      <div class="form-group">
        <label for="category">カテゴリ</label>
        <input id="category" name="category" placeholder="technology, programming, etc." />
      </div>
      
      <div class="form-group">
        <label for="tags">タグ (カンマ区切り)</label>
        <input id="tags" name="tags" placeholder="ai, machine-learning, tips" />
      </div>
    </div>
    
    <div class="form-group">
      <button type="submit" id="submit-btn">🚀 実行</button>
    </div>
  </form>

  <h2>⏰ スケジュール済みプロンプト</h2>
  <div class="schedule-controls">
    <button id="add-schedule-btn" style="background: #28a745; color: white; border: none; padding: 0.5rem 1rem; border-radius: 0.25rem; cursor: pointer; margin-bottom: 1rem;">➕ スケジュール追加</button>
  </div>
  <div id="scheduled-prompts-container" style="min-height: 100px; margin-bottom: 2rem;"></div>

  <!-- スケジュール追加フォーム（モーダル風） -->
  <div id="schedule-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000;">
    <div style="position: relative; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 2rem; border-radius: 0.5rem; max-width: 600px; width: 90%;">
      <h3 id="schedule-modal-title">📅 スケジュール追加</h3>
      <form id="schedule-form">
        <div class="form-group">
          <label for="schedule-name">プロンプト名 *</label>
          <input id="schedule-name" name="name" required placeholder="例: 毎日の技術ニュース">
        </div>
        
        <div class="form-group">
          <label for="schedule-prompt">プロンプト *</label>
          <textarea id="schedule-prompt" name="prompt" required rows="3" placeholder="Gemini AIに送信するプロンプトを入力してください..."></textarea>
        </div>
        
        <div class="form-group">
          <label for="schedule-model">モデル選択</label>
          <select id="schedule-model" name="model">
            <!-- Options will be populated by JavaScript -->
          </select>
          <div id="schedule-model-info" class="model-info" style="margin-top: 0.5rem; padding: 0.5rem; background: #f8f9fa; border-radius: 0.25rem; font-size: 0.9rem; color: #6c757d; display: none;">
            <!-- Model information will be displayed here -->
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label for="schedule-times">実行時間 * <small>（複数指定時はカンマ区切り。例: 09:00, 15:30, 21:00）</small></label>
            <input type="text" id="schedule-times" required placeholder="09:00, 15:30, 21:00" pattern="^(\d{1,2}:\d{2})(\s*,\s*\d{1,2}:\d{2})*$">
            <small style="color: #666; font-size: 0.8rem;">単一時間: 09:00 | 複数時間: 09:00, 15:30, 21:00</small>
          </div>
          <div class="form-group">
            <label for="schedule-category">カテゴリ</label>
            <input id="schedule-category" name="category" placeholder="scheduled">
          </div>
        </div>
        
        <div class="form-group">
          <label for="schedule-tags">タグ (カンマ区切り)</label>
          <input id="schedule-tags" name="tags" placeholder="daily, automated">
        </div>
        
        <div class="form-group">
          <label>
            <input type="checkbox" id="schedule-enabled" name="enabled" checked>
            有効にする
          </label>
        </div>
        
        <div class="form-group">
          <button type="submit" style="background: #007bff; color: white; border: none; padding: 0.5rem 1rem; border-radius: 0.25rem; cursor: pointer; margin-right: 0.5rem;">保存</button>
          <button type="button" id="cancel-schedule-btn" style="background: #6c757d; color: white; border: none; padding: 0.5rem 1rem; border-radius: 0.25rem; cursor: pointer;">キャンセル</button>
        </div>
      </form>
    </div>
  </div>

  <details>
    <summary>📊 API統計情報</summary>
    <div id="stats-container">
      <p>読み込み中...</p>
    </div>
  </details>
</body>

</html>