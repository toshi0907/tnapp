<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Weather Information</title>
  <link rel="stylesheet" href="/public/style.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="/public/weather/app.js" defer></script>
</head>

<body>
  <h1>天気情報管理</h1>

  <!-- メッセージ表示エリア -->
  <div id="msg"></div>

  <!-- 位置情報管理セクション -->
  <section class="locations-section">
    <h2>登録済み位置情報</h2>
    <div class="location-controls">
      <button id="refresh-locations-btn" class="btn btn-secondary">🔄 更新</button>
      <button id="add-location-btn" class="btn btn-primary">📍 位置情報を追加</button>
    </div>
    <div id="locations-container"></div>
  </section>

  <!-- 位置情報追加フォーム -->
  <section id="location-form-section" class="form-section" style="display: none;">
    <h2 id="location-form-title">新しい位置情報を追加</h2>
    <form id="location-form">
      <input type="hidden" id="location-id" value="">
      
      <div class="form-group">
        <label for="location-name">位置名 *</label>
        <input type="text" id="location-name" placeholder="東京都" required>
      </div>
      
      <div class="form-group">
        <label for="latitude">緯度 *</label>
        <input type="number" id="latitude" step="any" placeholder="35.6762" required>
      </div>
      
      <div class="form-group">
        <label for="longitude">経度 *</label>
        <input type="number" id="longitude" step="any" placeholder="139.6503" required>
      </div>
      
      <div class="form-group">
        <label for="description">説明</label>
        <textarea id="description" placeholder="位置の説明..."></textarea>
      </div>
      
      <div class="form-buttons">
        <button type="submit" id="location-submit-btn" class="btn btn-primary">追加</button>
        <button type="button" id="location-cancel-btn" class="btn btn-secondary">キャンセル</button>
      </div>
    </form>
  </section>

  <!-- 天気データ表示セクション -->
  <section class="weather-data-section">
    <h2>天気データ</h2>
    <div class="weather-controls">
      <label for="api-source-filter">APIソース:</label>
      <select id="api-source-filter">
        <option value="">全て</option>
        <option value="weatherapi">WeatherAPI</option>
        <option value="yahoo">Yahoo Weather</option>
      </select>
      <button id="refresh-weather-btn" class="btn btn-secondary">🔄 天気データ更新</button>
    </div>
    <div id="weather-container"></div>
  </section>

  <!-- グラフ表示セクション -->
  <section class="graphs-section">
    <h2>天気グラフ</h2>
    <div class="graph-controls">
      <label for="location-select">位置選択:</label>
      <select id="location-select">
        <option value="">位置を選択してください</option>
      </select>
      <button id="load-graphs-btn" class="btn btn-primary">📊 グラフを表示</button>
    </div>
    
    <!-- 気温グラフ -->
    <div class="graph-container">
      <h3>24時間気温変化 (WeatherAPI)</h3>
      <div id="temperature-chart" class="chart-container"></div>
    </div>
    
    <!-- 降雨量グラフ -->
    <div class="graph-container">
      <h3>24時間降雨量 (Yahoo Weather)</h3>
      <div id="rainfall-chart" class="chart-container"></div>
    </div>
  </section>

  <!-- 戻るリンク -->
  <div class="back-link">
    <a href="/public/">← メインページに戻る</a>
  </div>
</body>

</html>